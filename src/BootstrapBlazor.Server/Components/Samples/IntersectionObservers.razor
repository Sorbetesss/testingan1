@page "/intersection-observer"
@inherits BootstrapModuleComponentBase
@inject IStringLocalizer<IntersectionObservers> Localizer
@attribute [JSModuleAutoLoader("./Components/Samples/IntersectionObservers.razor.js", AutoInvokeInit = false, AutoInvokeDispose = false)]

<h3>@Localizer["IntersectionObserverTitle"]</h3>

<h4>@Localizer["IntersectionObserverDescription"]</h4>

<DemoBlock Title="@Localizer["IntersectionObserverBaseUsage"]"
           Introduction="@Localizer["IntersectionObserverNormalIntro"]"
           Name="Normal">
    <section ignore>@((MarkupString)Localizer["IntersectionObserverNormalDescription"].Value)</section>
    <IntersectionObserver OnIntersecting="OnIntersectingAsync">
        <div class="bb-list-main scroll">
            @foreach (var image in _images)
            {
                <IntersectionObserverItem>
                    <div class="bb-list-item">
                        <img src="@image" />
                    </div>
                </IntersectionObserverItem>
            }
        </div>
    </IntersectionObserver>
</DemoBlock>

<DemoBlock Title="@Localizer["IntersectionObserverLoadTitle"]"
           Introduction="@Localizer["IntersectionObserverLoadIntro"]"
           Name="LoadMore">
    <section ignore>
        <ul class="ul-demo">
            <li>@((MarkupString)Localizer["IntersectionObserverLoadDesc1"].Value)</li>
            <li>@((MarkupString)Localizer["IntersectionObserverLoadDesc2"].Value)</li>
            <li>@((MarkupString)Localizer["IntersectionObserverLoadDesc3"].Value)</li>
        </ul>
    </section>
    <IntersectionObserver OnIntersecting="OnLoadMoreAsync" Threshold="1" AutoUnobserve="false">
        <div class="bb-list-load scroll">
            <div class="bb-list-demo">
                @foreach (var image in _items)
                {
                    <div class="bb-list-item">
                        <img src="@image" />
                    </div>
                }
            </div>
            <IntersectionObserverItem>
                <div class="bb-list-item-loading">
                    <Spinner></Spinner>
                </div>
            </IntersectionObserverItem>
        </div>
    </IntersectionObserver>
</DemoBlock>

<DemoBlock Title="@Localizer["IntersectionObserverVisibleTitle"]"
           Introduction="@Localizer["IntersectionObserverVisibleIntro"]"
           Name="Threshold">
    <section ignore><p>@((MarkupString)Localizer["IntersectionObserverVisibleDesc"].Value)</p></section>
    <IntersectionObserver OnIntersecting="OnVisibleChanged" Threshold="1" AutoUnobserve="false">
        <div class="bb-video-demo scroll">
            <div class="bb-video">
                <IntersectionObserverItem>
                    <video controls width="350" src="https://archive.org/download/BigBuckBunny_124/Content/big_buck_bunny_720p_surround.mp4"></video>
                </IntersectionObserverItem>
            </div>
        </div>
    </IntersectionObserver>
</DemoBlock>

<AttributeTable Items="@GetAttributes()" />
