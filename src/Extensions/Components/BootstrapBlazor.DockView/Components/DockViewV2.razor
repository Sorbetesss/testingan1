@inherits BootstrapModuleComponentBase
@attribute [JSModuleAutoLoader("./_content/BootstrapBlazor.DockView/Components/DockViewV2.razor.js", JSObjectReference = true, AutoInvokeInit = false)]

<div @attributes="@AdditionalAttributes" id="@Id" class="@ClassString">
    <CascadingValue Value="_root" IsFixed="true">
        <CascadingValue Value="_components" IsFixed="true">
            @ChildContent
        </CascadingValue>
    </CascadingValue>
    @if (_rendered)
    {
        <template id="@_templateId">
            @foreach (var p in _components)
            {
                <div @key="p" id="@p.Id" data-bb-key="@p.Key" data-bb-title="@p.Title">
                    @if (p.ShowTitleBar)
                    {
                        <DockViewTitle BarIcon="@p.TitleBarIcon" BarIconUrl="@p.TitleBarIconUrl" OnClickBarCallback="@OnClickBar(p.OnClickTitleBarCallback)"></DockViewTitle>
                    }
                    @if (p.TitleTemplate != null)
                    {
                        <div class="bb-dock-view-item-title">
                            @p.TitleTemplate
                        </div>
                    }
                    @p.ChildContent
                </div>
            }
            <svg class="bb-dockview-control-icon bb-dockview-control-icon-close"><use xlink:href="./icon/dockview.svg#close"></use></svg>
            <svg class="bb-dockview-control-icon bb-dockview-control-icon-lock"><use xlink:href="./icon/dockview.svg#lock"></use></svg>
            <svg class="bb-dockview-control-icon bb-dockview-control-icon-unlock"><use xlink:href="./icon/dockview.svg#unlock"></use></svg>
            <svg class="bb-dockview-control-icon bb-dockview-control-icon-full"><use xlink:href="./icon/dockview.svg#full"></use></svg>
            <svg class="bb-dockview-control-icon bb-dockview-control-icon-restore"><use xlink:href="./icon/dockview.svg#restore"></use></svg>
            <svg class="bb-dockview-control-icon bb-dockview-control-icon-float"><use xlink:href="./icon/dockview.svg#float"></use></svg>
            <svg class="bb-dockview-control-icon bb-dockview-control-icon-dock"><use xlink:href="./icon/dockview.svg#dock"></use></svg>
            <svg class="bb-dockview-control-icon bb-dockview-control-icon-down"><use xlink:href="./icon/dockview.svg#down"></use></svg>
        </template>
    }
</div>
